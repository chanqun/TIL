## 스프링

### 서블릿, 서블릿 필터, 인터셉터

WAS -> Dispatcher Servlet -> (Pre Handler, Handler Adapter - Controller, PostHandler) -> afterCompletion -> WAS

- 클라이언트의 요청을 디스패처 서블릿이 받음
- 요청 정보를 통해 요청을 위임할 컨트롤러를 찾음
- 요청을 컨트롤러로 위임할 핸들러 어댑터를 찾아서 전달함
- 핸들러 어댑터가 컨트롤러로 요청을 위임함
- 비지니스 로직을 처리함
- 컨트롤러가 반환값을 반환함
- 핸들러 어댑터가 반환값을 처리함
- 서버의 응답을 클라이언트로 반환함

![dispatcher-servlet.png](../image/dispatcher-servlet.png)

![filter.png](../image/filter.png)

로그인 서블릿 필터 제한
```java
HTTP 요청 -> WAS -> 필터 -> 서블릿 -> 컨트롤러 //로그인 사용자
HTTP 요청 -> WAS -> 필터(적절하지 않은 요청이라 판단, 서블릿 호출X) //비 로그인 사용자
```
필터에서 적절하지 않은 요청이라고 판단하기 좋음

> ApplicationFilter는 등록해두면 재귀적으로 작동함 (coroutine같이)



