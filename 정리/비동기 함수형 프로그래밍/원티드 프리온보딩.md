# Cloud Computing

배민 카프카 클러스터 규모 (22년 8월)
- 카프카 27대
- 브로커 162대
- 파티션 24000개
- 초당 평균 50만건, 최대 140만건

90% 이상 aws
azure는 앱 특화
google은 쿠버네티스 특화

## AWS 인프라의 전체적인 모습

1. 인프라 관련 요소
AWS 
API Gateway, S3, ELB, CloudFront, Secret Manager, 스냅샷
2. 컴퓨팅 파워 (서버)
EC2, Elastic Beanstalk, ecs, fargate, lambda(serveerldee)
3. DB
RDS, DynamoDB, ElasticCache
4. Message Queue
SQS, MSK, Kinesis

## AWS VPC
Virtual Private Cloud
- 가상 네트워크 서비스로 퍼블릭 네트워크와 프라이빗 네트워크를 분리하고 모니터링할 수 있도록 해주는 서비스
- 네트워크 구성과 관련된 사실상 모든 기능을 담당하며, 자체 데이터 센터에서 운영하는 기존 네트워크와 매우 유사

VPC(Private Subnet-DB, Public Subnet-Server)

## AWS API Gateway
API Gateway
- 어떤 규모에서든 개발자가 API를 손쉽게 생성, 게시, 유지 관리, 모니터링 및 보안 유지할 수 있도록 하는 완전관리형 서비스
- 서버의 대문
- 트래픽 관리, CORS, 권한 부여 및 액세스 제어, 제한, 모니터링 API 버전 관리, 인증관련

lambda + API Gateway (serverless)

테라폼, cloud formation

## AWS ELB
Elastic Load Balancing
다수의 컴퓨팅 리소스를 부하 분산(EC2, lambda 등)

ALB (HTTPS), NLB(TCP, UDP, TLS), GLB (GWLB)

## S3
데이터 처리 (Trigger로 람다 실행 가능), 로그, 쿼리 지원 (AWS Athena), 호스팅(Single Page Application) React 
-> 이동 이벤트를 s3에 저장하고 Athena로 분석

사진 올리면 -> Trigger 람다 -> 섬네일이 자동으로 만들어지는 구조 할 수 있음

## CloudFront (캐시 서비스)
- AWS 엣지 로케이션을 통한 CDN 서비스
- 속도 높이고, 가격 내리며, 서버 부하를 줄일 수 있음

캐싱하고 싶은 s3 bucket 을 지정할 수 있음
cloudfront 무효화 하면 캐싱된 것을 날리고 새로 캐싱함
